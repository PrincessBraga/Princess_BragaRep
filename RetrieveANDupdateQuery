<script runat="server">

    Platform.Load("core", "1");

    var api = new Script.Util.WSProxy();
 
 try {

        var name = "MyNewQuery";

        var request = api.retrieve("QueryDefinition", ["CustomerKey", "ObjectID", "QueryText"], {
            Property: "CustomerKey", 
            SimpleOperator: "equals",
            Value: "3BC9F092-828E-40AC-A8E7-46B734E5EACA"
        });

       var objectID = request.Results[0].ObjectID,
           queryText = request.Results[0].QueryText,
           categoryID = request.Results[0].categoryId;

        var updated_query = queryText + ' where c.Id is NOT null ';

        var config = {
            ObjectID: objectID,
            Description: "My updated query",
            CategoryID: categoryID,
            QueryText: updated_query
       };

        var result = api.updateItem("QueryDefinition", config);

        Write("version2"+Stringify(result));
  
 } catch(error) {

        Write(Stringify(error));
        
    } 

</script>
